# 스프링 애플리케이션 기본 설정
spring:
  application:
    name: web.healthcare
  profiles:
    active: dev

  # JSP 뷰 설정
  mvc:
    view:
      prefix: /WEB-INF/jsp/
      suffix: .jsp
    static-path-pattern: /static/**

  # 정적 리소스 설정
  web:
    resources:
      static-locations: classpath:/static/,classpath:/public/,file:src/main/webapp/
      cache:
        period: 3600

  # JPA 설정
  jpa:
    hibernate:
      ddl-auto: validate
      naming:
        physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.H2Dialect
        jdbc:
          time_zone: Asia/Seoul

  # MyBatis 설정
  mybatis:
    mapper-locations: classpath:mapper/*.xml
    type-aliases-package: com.sleekydz86.web.dto
    configuration:
      map-underscore-to-camel-case: true
      default-fetch-size: 100
      default-statement-timeout: 30

  # Spring Security 설정
  security:
    user:
      name: admin
      password: admin123
      roles: ADMIN

  # Spring Cloud Config 설정
  config:
    import: optional:configserver:http://localhost:8888
  cloud:
    config:
      uri: http://localhost:8888
      fail-fast: false
      retry:
        initial-interval: 1000
        max-attempts: 6
        max-interval: 2000
        multiplier: 1.1

  # 파일 업로드 설정 (중복 제거)
  servlet:
    multipart:
      enabled: true
      max-file-size: 10MB
      max-request-size: 10MB
      location: ${imgPath}

  # 캐시 설정
  cache:
    type: simple
    cache-names:
      - userCache
      - healthcareCache

  # 메시지 설정
  messages:
    basename: messages
    encoding: UTF-8
    cache-duration: 3600

# Gateway (백엔드 서비스) 설정
gateway:
  version: /v1
  auth:
    uri: http://localhost:8082
  healthcare:
    uri: http://localhost:8081
  usermanagement:
    uri: http://localhost:8086
  community:
    uri: http://localhost:8085

# HTTP 요청 타임아웃 설정
request:
  timeout: 30

# JWT 토큰 설정
token:
  secret: healthcare-lifelink-jwt-secret-key-for-authentication-service-2025-dev
  access-expired-time: 3600000
  refresh-expired-time: 86400000

# Eureka Client 설정
eureka:
  client:
    service-url:
      defaultZone: http://localhost:8761/eureka/
    register-with-eureka: true
    fetch-registry: true
  instance:
    prefer-ip-address: true
    instance-id: ${spring.application.name}:${spring.application.instance_id:${random.value}}
    lease-renewal-interval-in-seconds: 30
    lease-expiration-duration-in-seconds: 90

# Management & Actuator 설정
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,env,configprops
      base-path: /actuator
  endpoint:
    health:
      show-details: when-authorized
  info:
    env:
      enabled: true

# 로깅 설정
logging:
  config: classpath:log4j2-spring.xml
  level:
    root: INFO
    com.sleekydz86: DEBUG
    org.springframework.security: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
    org.springframework.web: DEBUG

# 애플리케이션 정보
info:
  app:
    name: Healthcare Web Application
    description: Healthcare LifeLink Web Frontend
    version: 1.0.0
    encoding: UTF-8
    java:
      version: ${java.version}

# 파일 저장 경로
imgPath: C:/healthcare/images
# imgPath: /var/healthcare/images